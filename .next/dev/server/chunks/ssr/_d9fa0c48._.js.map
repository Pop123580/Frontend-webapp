{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omcha/OneDrive/Desktop/front/Frontend-webapp/app/ask-ai/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface Message {\r\n  id: string;\r\n  role: \"user\" | \"ai\";\r\n  content: string;\r\n  timestamp: Date;\r\n}\r\n\r\nconst languages = [\r\n  { code: \"en\", name: \"English\", flag: \"üá¨üáß\" },\r\n  { code: \"es\", name: \"Spanish\", flag: \"üá™üá∏\" },\r\n  { code: \"fr\", name: \"French\", flag: \"üá´üá∑\" },\r\n  { code: \"de\", name: \"German\", flag: \"üá©üá™\" },\r\n  { code: \"hi\", name: \"Hindi\", flag: \"üáÆüá≥\" },\r\n  { code: \"zh\", name: \"Mandarin\", flag: \"üá®üá≥\" },\r\n  { code: \"ja\", name: \"Japanese\", flag: \"üáØüáµ\" },\r\n];\r\n\r\nconst API_URL = \"http://localhost:5000/api\";\r\n\r\nexport default function AskAIPage() {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectedLang, setSelectedLang] = useState(\"English\");\r\n  const [sessionId] = useState(() => Date.now().toString());\r\n  const [error, setError] = useState(\"\");\r\n  const [backendStatus, setBackendStatus] = useState<\"checking\" | \"online\" | \"offline\">(\"checking\");\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    checkBackendStatus();\r\n  }, []);\r\n\r\n  const checkBackendStatus = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/health`);\r\n      if (response.ok) {\r\n        setBackendStatus(\"online\");\r\n      } else {\r\n        setBackendStatus(\"offline\");\r\n      }\r\n    } catch {\r\n      setBackendStatus(\"offline\");\r\n    }\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim() || loading) return;\r\n\r\n    const userMessage: Message = {\r\n      id: Date.now().toString(),\r\n      role: \"user\",\r\n      content: input,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    const currentInput = input;\r\n    setInput(\"\");\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const response = await fetch(`${API_URL}/chat/ask`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          message: currentInput,\r\n          language: selectedLang,\r\n          sessionId: sessionId,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || \"Failed to get response\");\r\n      }\r\n\r\n      const aiMessage: Message = {\r\n        id: (Date.now() + 1).toString(),\r\n        role: \"ai\",\r\n        content: data.data.message,\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, aiMessage]);\r\n    } catch (err: any) {\r\n      console.error(\"Chat error:\", err);\r\n      setError(err.message || \"Failed to get response. Please try again.\");\r\n      setBackendStatus(\"offline\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  const clearChat = () => {\r\n    setMessages([]);\r\n    setError(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">üí¨ Ask AI</h1>\r\n          <p className=\"text-gray-500 mt-1\">\r\n            Get instant answers to your academic questions\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className={`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${\r\n            backendStatus === \"online\" \r\n              ? \"bg-green-100 text-green-700\" \r\n              : backendStatus === \"offline\"\r\n              ? \"bg-red-100 text-red-700\"\r\n              : \"bg-yellow-100 text-yellow-700\"\r\n          }`}>\r\n            <div className={`w-2 h-2 rounded-full ${\r\n              backendStatus === \"online\" \r\n                ? \"bg-green-500\" \r\n                : backendStatus === \"offline\"\r\n                ? \"bg-red-500\"\r\n                : \"bg-yellow-500 animate-pulse\"\r\n            }`}></div>\r\n            {backendStatus === \"online\" ? \"Backend Online\" : backendStatus === \"offline\" ? \"Backend Offline\" : \"Checking...\"}\r\n          </div>\r\n          {messages.length > 0 && (\r\n            <button onClick={clearChat} className=\"btn btn-secondary\">\r\n              üóëÔ∏è Clear\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Backend Offline Warning */}\r\n      {backendStatus === \"offline\" && (\r\n        <div className=\"bg-red-50 border border-red-200 rounded-xl p-4\">\r\n          <h3 className=\"font-semibold text-red-800 mb-2\">‚ö†Ô∏è Backend Server Not Running</h3>\r\n          <p className=\"text-red-700 text-sm mb-3\">\r\n            Start the backend server:\r\n          </p>\r\n          <code className=\"block bg-red-100 rounded-lg p-3 text-sm text-red-800\">\r\n            cd learnai-backend && node server.js\r\n          </code>\r\n          <button \r\n            onClick={checkBackendStatus}\r\n            className=\"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700\"\r\n          >\r\n            üîÑ Check Again\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Language Selection */}\r\n      <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\r\n        <p className=\"text-sm text-gray-600 mb-3\">Select Language:</p>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {languages.map((lang) => (\r\n            <button\r\n              key={lang.code}\r\n              onClick={() => setSelectedLang(lang.name)}\r\n              className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${\r\n                selectedLang === lang.name\r\n                  ? \"bg-amber-600 text-white\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              }`}\r\n            >\r\n              {lang.flag} {lang.name}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Container */}\r\n      <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden flex flex-col h-[500px]\">\r\n        {/* Messages Area */}\r\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n          {messages.length === 0 ? (\r\n            <div className=\"h-full flex flex-col items-center justify-center text-center p-8\">\r\n              <div className=\"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mb-4\">\r\n                <span className=\"text-4xl\">üí¨</span>\r\n              </div>\r\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n                Ask your first question\r\n              </h3>\r\n              <p className=\"text-gray-500 max-w-sm mb-6\">\r\n                Type any academic question and get instant AI-powered answers\r\n              </p>\r\n              <div className=\"flex flex-wrap justify-center gap-2\">\r\n                {[\r\n                  \"Explain photosynthesis\",\r\n                  \"What is calculus?\",\r\n                  \"Solve: 2x + 5 = 15\",\r\n                ].map((suggestion) => (\r\n                  <button\r\n                    key={suggestion}\r\n                    onClick={() => setInput(suggestion)}\r\n                    disabled={backendStatus === \"offline\"}\r\n                    className=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 disabled:opacity-50\"\r\n                  >\r\n                    {suggestion}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {messages.map((msg) => (\r\n                <div\r\n                  key={msg.id}\r\n                  className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\r\n                >\r\n                  <div\r\n                    className={`max-w-[80%] p-4 rounded-2xl ${\r\n                      msg.role === \"user\"\r\n                        ? \"bg-amber-600 text-white rounded-br-md\"\r\n                        : \"bg-gray-100 text-gray-800 rounded-bl-md\"\r\n                    }`}\r\n                  >\r\n                    <p className=\"whitespace-pre-wrap\">{msg.content}</p>\r\n                    <p className={`text-xs mt-2 ${\r\n                      msg.role === \"user\" ? \"text-amber-200\" : \"text-gray-400\"\r\n                    }`}>\r\n                      {msg.timestamp.toLocaleTimeString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              {loading && (\r\n                <div className=\"flex justify-start\">\r\n                  <div className=\"bg-gray-100 p-4 rounded-2xl rounded-bl-md\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\r\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"150ms\" }}></div>\r\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"300ms\" }}></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              <div ref={messagesEndRef} />\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* Input Area */}\r\n        <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\r\n          <div className=\"flex gap-3\">\r\n            <input\r\n              type=\"text\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              onKeyDown={handleKeyDown}\r\n              placeholder={backendStatus === \"offline\" ? \"Start backend server first...\" : \"Type your question here...\"}\r\n              className=\"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n              disabled={loading || backendStatus === \"offline\"}\r\n            />\r\n            <button\r\n              onClick={handleSend}\r\n              disabled={loading || !input.trim() || backendStatus === \"offline\"}\r\n              className=\"px-6 py-3 bg-amber-600 text-white rounded-xl hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {loading ? \"...\" : \"Send\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWA,MAAM,YAAY;IAChB;QAAE,MAAM;QAAM,MAAM;QAAW,MAAM;IAAO;IAC5C;QAAE,MAAM;QAAM,MAAM;QAAW,MAAM;IAAO;IAC5C;QAAE,MAAM;QAAM,MAAM;QAAU,MAAM;IAAO;IAC3C;QAAE,MAAM;QAAM,MAAM;QAAU,MAAM;IAAO;IAC3C;QAAE,MAAM;QAAM,MAAM;QAAS,MAAM;IAAO;IAC1C;QAAE,MAAM;QAAM,MAAM;QAAY,MAAM;IAAO;IAC7C;QAAE,MAAM;QAAM,MAAM;QAAY,MAAM;IAAO;CAC9C;AAED,MAAM,UAAU;AAED,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,UAAU,GAAG,IAAA,iNAAQ,EAAC,IAAM,KAAK,GAAG,GAAG,QAAQ;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAoC;IACtF,MAAM,iBAAiB,IAAA,+MAAM,EAAiB;IAE9C,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,OAAO,CAAC;YAChD,IAAI,SAAS,EAAE,EAAE;gBACf,iBAAiB;YACnB,OAAO;gBACL,iBAAiB;YACnB;QACF,EAAE,OAAM;YACN,iBAAiB;QACnB;IACF;IAEA,MAAM,iBAAiB;QACrB,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D;IAEA,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,aAAa;QACjB,IAAI,CAAC,MAAM,IAAI,MAAM,SAAS;QAE9B,MAAM,cAAuB;YAC3B,IAAI,KAAK,GAAG,GAAG,QAAQ;YACvB,MAAM;YACN,SAAS;YACT,WAAW,IAAI;QACjB;QAEA,YAAY,CAAC,OAAS;mBAAI;gBAAM;aAAY;QAC5C,MAAM,eAAe;QACrB,SAAS;QACT,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,SAAS,CAAC,EAAE;gBAClD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,SAAS;oBACT,UAAU;oBACV,WAAW;gBACb;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,KAAK,OAAO,IAAI;YAClC;YAEA,MAAM,YAAqB;gBACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,EAAE,QAAQ;gBAC7B,MAAM;gBACN,SAAS,KAAK,IAAI,CAAC,OAAO;gBAC1B,WAAW,IAAI;YACjB;YAEA,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAU;QAC5C,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,eAAe;YAC7B,SAAS,IAAI,OAAO,IAAI;YACxB,iBAAiB;QACnB,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YACpC,EAAE,cAAc;YAChB;QACF;IACF;IAEA,MAAM,YAAY;QAChB,YAAY,EAAE;QACd,SAAS;IACX;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,8OAAC;gCAAE,WAAU;0CAAqB;;;;;;;;;;;;kCAIpC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAW,CAAC,yDAAyD,EACxE,kBAAkB,WACd,gCACA,kBAAkB,YAClB,4BACA,iCACJ;;kDACA,8OAAC;wCAAI,WAAW,CAAC,qBAAqB,EACpC,kBAAkB,WACd,iBACA,kBAAkB,YAClB,eACA,+BACJ;;;;;;oCACD,kBAAkB,WAAW,mBAAmB,kBAAkB,YAAY,oBAAoB;;;;;;;4BAEpG,SAAS,MAAM,GAAG,mBACjB,8OAAC;gCAAO,SAAS;gCAAW,WAAU;0CAAoB;;;;;;;;;;;;;;;;;;YAQ/D,kBAAkB,2BACjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,8OAAC;wBAAE,WAAU;kCAA4B;;;;;;kCAGzC,8OAAC;wBAAK,WAAU;kCAAuD;;;;;;kCAGvE,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;YAOJ,uBACC,8OAAC;gBAAI,WAAU;0BACZ;;;;;;0BAKL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;kCAC1C,8OAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC,qBACd,8OAAC;gCAEC,SAAS,IAAM,gBAAgB,KAAK,IAAI;gCACxC,WAAW,CAAC,0DAA0D,EACpE,iBAAiB,KAAK,IAAI,GACtB,4BACA,+CACJ;;oCAED,KAAK,IAAI;oCAAC;oCAAE,KAAK,IAAI;;+BARjB,KAAK,IAAI;;;;;;;;;;;;;;;;0BAetB,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACZ,SAAS,MAAM,KAAK,kBACnB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAK,WAAU;kDAAW;;;;;;;;;;;8CAE7B,8OAAC;oCAAG,WAAU;8CAA2C;;;;;;8CAGzD,8OAAC;oCAAE,WAAU;8CAA8B;;;;;;8CAG3C,8OAAC;oCAAI,WAAU;8CACZ;wCACC;wCACA;wCACA;qCACD,CAAC,GAAG,CAAC,CAAC,2BACL,8OAAC;4CAEC,SAAS,IAAM,SAAS;4CACxB,UAAU,kBAAkB;4CAC5B,WAAU;sDAET;2CALI;;;;;;;;;;;;;;;iDAWb;;gCACG,SAAS,GAAG,CAAC,CAAC,oBACb,8OAAC;wCAEC,WAAW,CAAC,KAAK,EAAE,IAAI,IAAI,KAAK,SAAS,gBAAgB,iBAAiB;kDAE1E,cAAA,8OAAC;4CACC,WAAW,CAAC,4BAA4B,EACtC,IAAI,IAAI,KAAK,SACT,0CACA,2CACJ;;8DAEF,8OAAC;oDAAE,WAAU;8DAAuB,IAAI,OAAO;;;;;;8DAC/C,8OAAC;oDAAE,WAAW,CAAC,aAAa,EAC1B,IAAI,IAAI,KAAK,SAAS,mBAAmB,iBACzC;8DACC,IAAI,SAAS,CAAC,kBAAkB;;;;;;;;;;;;uCAdhC,IAAI,EAAE;;;;;gCAmBd,yBACC,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;;;;;8DACf,8OAAC;oDAAI,WAAU;oDAAkD,OAAO;wDAAE,gBAAgB;oDAAQ;;;;;;8DAClG,8OAAC;oDAAI,WAAU;oDAAkD,OAAO;wDAAE,gBAAgB;oDAAQ;;;;;;;;;;;;;;;;;;;;;;8CAK1G,8OAAC;oCAAI,KAAK;;;;;;;;;;;;;kCAMhB,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,WAAW;oCACX,aAAa,kBAAkB,YAAY,kCAAkC;oCAC7E,WAAU;oCACV,UAAU,WAAW,kBAAkB;;;;;;8CAEzC,8OAAC;oCACC,SAAS;oCACT,UAAU,WAAW,CAAC,MAAM,IAAI,MAAM,kBAAkB;oCACxD,WAAU;8CAET,UAAU,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOjC"}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omcha/OneDrive/Desktop/front/Frontend-webapp/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omcha/OneDrive/Desktop/front/Frontend-webapp/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\n\ninterface Message {\n  id: string;\n  role: \"user\" | \"ai\";\n  content: string;\n  timestamp: Date;\n}\n\nconst languages = [\n  { code: \"en\", name: \"English\", flag: \"üá¨üáß\" },\n  { code: \"es\", name: \"Spanish\", flag: \"üá™üá∏\" },\n  { code: \"fr\", name: \"French\", flag: \"üá´üá∑\" },\n  { code: \"de\", name: \"German\", flag: \"üá©üá™\" },\n  { code: \"hi\", name: \"Hindi\", flag: \"üáÆüá≥\" },\n  { code: \"zh\", name: \"Mandarin\", flag: \"üá®üá≥\" },\n  { code: \"ja\", name: \"Japanese\", flag: \"üáØüáµ\" },\n];\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000/api\";\n\nexport default function AskAIPage() {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [selectedLang, setSelectedLang] = useState(\"English\");\n  const [sessionId] = useState(() => Date.now().toString());\n  const [error, setError] = useState(\"\");\n  const [backendStatus, setBackendStatus] = useState<\"checking\" | \"online\" | \"offline\">(\"checking\");\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Check backend status on mount\n  useEffect(() => {\n    checkBackendStatus();\n  }, []);\n\n  const checkBackendStatus = async () => {\n    try {\n      const response = await fetch(`${API_URL}/health`);\n      if (response.ok) {\n        setBackendStatus(\"online\");\n      } else {\n        setBackendStatus(\"offline\");\n      }\n    } catch {\n      setBackendStatus(\"offline\");\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSend = async () => {\n    if (!input.trim() || loading) return;\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: \"user\",\n      content: input,\n      timestamp: new Date(),\n    };\n\n    setMessages((prev) => [...prev, userMessage]);\n    const currentInput = input;\n    setInput(\"\");\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const response = await fetch(`${API_URL}/chat/ask`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          message: currentInput,\n          language: selectedLang,\n          sessionId: sessionId,\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || \"Failed to get response\");\n      }\n\n      const aiMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: \"ai\",\n        content: data.data.message,\n        timestamp: new Date(),\n      };\n\n      setMessages((prev) => [...prev, aiMessage]);\n    } catch (err: any) {\n      console.error(\"Chat error:\", err);\n      \n      // Check if backend is offline\n      if (err.message.includes(\"fetch\") || err.message.includes(\"network\")) {\n        setError(\"Cannot connect to backend. Make sure the backend server is running on port 5000.\");\n        setBackendStatus(\"offline\");\n      } else {\n        setError(err.message || \"Failed to get response. Please try again.\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const clearChat = () => {\n    setMessages([]);\n    setError(\"\");\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">üí¨ Ask AI</h1>\n          <p className=\"text-gray-500 mt-1\">\n            Get instant answers to your academic questions\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          {/* Backend Status */}\n          <div className={`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${\n            backendStatus === \"online\" \n              ? \"bg-green-100 text-green-700\" \n              : backendStatus === \"offline\"\n              ? \"bg-red-100 text-red-700\"\n              : \"bg-yellow-100 text-yellow-700\"\n          }`}>\n            <div className={`w-2 h-2 rounded-full ${\n              backendStatus === \"online\" \n                ? \"bg-green-500\" \n                : backendStatus === \"offline\"\n                ? \"bg-red-500\"\n                : \"bg-yellow-500 animate-pulse\"\n            }`}></div>\n            {backendStatus === \"online\" ? \"Backend Online\" : backendStatus === \"offline\" ? \"Backend Offline\" : \"Checking...\"}\n          </div>\n          {messages.length > 0 && (\n            <button onClick={clearChat} className=\"btn btn-secondary\">\n              üóëÔ∏è Clear Chat\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Backend Offline Warning */}\n      {backendStatus === \"offline\" && (\n        <div className=\"bg-red-50 border border-red-200 rounded-xl p-4\">\n          <h3 className=\"font-semibold text-red-800 mb-2\">‚ö†Ô∏è Backend Server Not Running</h3>\n          <p className=\"text-red-700 text-sm mb-3\">\n            The AI backend server is not running. Please start it:\n          </p>\n          <div className=\"bg-red-100 rounded-lg p-3 font-mono text-sm text-red-800\">\n            cd learnai-backend<br/>\n            npm run dev\n          </div>\n          <button \n            onClick={checkBackendStatus}\n            className=\"mt-3 btn btn-secondary text-sm\"\n          >\n            üîÑ Check Again\n          </button>\n        </div>\n      )}\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center justify-between\">\n          <span>{error}</span>\n          <button onClick={() => setError(\"\")} className=\"text-red-500 hover:text-red-700\">\n            ‚úï\n          </button>\n        </div>\n      )}\n\n      {/* Language Selection */}\n      <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\n        <p className=\"text-sm text-gray-600 mb-3\">Select Language:</p>\n        <div className=\"flex flex-wrap gap-2\">\n          {languages.map((lang) => (\n            <button\n              key={lang.code}\n              onClick={() => setSelectedLang(lang.name)}\n              className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${\n                selectedLang === lang.name\n                  ? \"bg-amber-600 text-white\"\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n              }`}\n            >\n              {lang.flag} {lang.name}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Chat Container */}\n      <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden flex flex-col h-[500px]\">\n        {/* Messages Area */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n          {messages.length === 0 ? (\n            <div className=\"h-full flex flex-col items-center justify-center text-center p-8\">\n              <div className=\"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mb-4\">\n                <span className=\"text-4xl\">üí¨</span>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                Ask your first question\n              </h3>\n              <p className=\"text-gray-500 max-w-sm mb-6\">\n                Type any academic question and get instant AI-powered answers\n              </p>\n              <div className=\"flex flex-wrap justify-center gap-2\">\n                {[\n                  \"Explain photosynthesis\",\n                  \"What is calculus?\",\n                  \"Solve: 2x + 5 = 15\",\n                ].map((suggestion) => (\n                  <button\n                    key={suggestion}\n                    onClick={() => setInput(suggestion)}\n                    disabled={backendStatus === \"offline\"}\n                    className=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                  >\n                    {suggestion}\n                  </button>\n                ))}\n              </div>\n            </div>\n          ) : (\n            <>\n              {messages.map((msg) => (\n                <div\n                  key={msg.id}\n                  className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n                >\n                  <div\n                    className={`max-w-[80%] p-4 rounded-2xl ${\n                      msg.role === \"user\"\n                        ? \"bg-amber-600 text-white rounded-br-md\"\n                        : \"bg-gray-100 text-gray-800 rounded-bl-md\"\n                    }`}\n                  >\n                    <p className=\"whitespace-pre-wrap\">{msg.content}</p>\n                    <p\n                      className={`text-xs mt-2 ${\n                        msg.role === \"user\" ? \"text-amber-200\" : \"text-gray-400\"\n                      }`}\n                    >\n                      {msg.timestamp.toLocaleTimeString()}\n                    </p>\n                  </div>\n                </div>\n              ))}\n              {loading && (\n                <div className=\"flex justify-start\">\n                  <div className=\"bg-gray-100 p-4 rounded-2xl rounded-bl-md\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"150ms\" }}></div>\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"300ms\" }}></div>\n                    </div>\n                  </div>\n                </div>\n              )}\n              <div ref={messagesEndRef} />\n            </>\n          )}\n        </div>\n\n        {/* Input Area */}\n        <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n          <div className=\"flex gap-3\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder={backendStatus === \"offline\" ? \"Start the backend server first...\" : \"Type your question here...\"}\n              className=\"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all disabled:bg-gray-100 disabled:cursor-not-allowed\"\n              disabled={loading || backendStatus === \"offline\"}\n            />\n            <button\n              onClick={handleSend}\n              disabled={loading || !input.trim() || backendStatus === \"offline\"}\n              className=\"btn btn-primary px-6 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? (\n                <span className=\"spinner\"></span>\n              ) : (\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\n                </svg>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 578, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omcha/OneDrive/Desktop/front/Frontend-webapp/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omcha/OneDrive/Desktop/front/Frontend-webapp/app/api/generate-study-timetable/route.ts"],"sourcesContent":["interface TimetableEntry {\n  day: number\n  date: string\n  sessions: {\n    subject: string\n    duration: number\n    focus: string\n    timeSlot: string\n  }[]\n  totalHours: number\n}\n\n// Study focus areas by subject for diverse learning topics\nconst focusAreas: Record<string, string[]> = {\n  'Mathematics': ['Algebra fundamentals', 'Geometry concepts', 'Calculus practice', 'Problem-solving drills', 'Review formulas'],\n  'Physics': ['Mechanics principles', 'Thermodynamics', 'Electromagnetism', 'Wave motion', 'Quantum basics'],\n  'Chemistry': ['Atomic structure', 'Bonding theory', 'Stoichiometry', 'Reactions', 'Organic synthesis'],\n  'Biology': ['Cell biology', 'Genetics', 'Evolution', 'Ecology', 'Human anatomy'],\n  'English': ['Literature analysis', 'Grammar rules', 'Essay writing', 'Vocabulary building', 'Reading comprehension'],\n  'History': ['Timeline events', 'Historical analysis', 'Key figures', 'Cause and effect', 'Primary sources'],\n  'Science': ['Experimental methods', 'Data analysis', 'Lab techniques', 'Scientific reasoning', 'Review concepts'],\n  'Computer Science': ['Programming concepts', 'Data structures', 'Algorithms', 'System design', 'Debug exercises'],\n  'Economics': ['Microeconomics', 'Macroeconomics', 'Market analysis', 'Policy implications', 'Case studies'],\n  'Literature': ['Text analysis', 'Themes exploration', 'Character development', 'Writing style', 'Comparative study'],\n}\n\n// Get rotating focus area for a subject\nfunction getSubjectFocus(subject: string, dayNumber: number): string {\n  const areas = focusAreas[subject] || focusAreas['Science']\n  return areas[(dayNumber - 1) % areas.length]\n}\n\n// Generate intelligent study timetable without requiring AI\nfunction generateSmartTimetable(\n  subjects: string[],\n  examDate: string,\n  daysUntilExam: number,\n): TimetableEntry[] {\n  const today = new Date(examDate)\n  today.setDate(today.getDate() - daysUntilExam)\n\n  const timetable: TimetableEntry[] = []\n  const daysToSchedule = Math.min(daysUntilExam, 30)\n  \n  // Calculate hours per day based on number of subjects and days\n  const totalStudyHours = subjects.length * daysToSchedule * 2 // 2 hours per subject per cycle\n  const baseHoursPerDay = Math.max(3, Math.min(8, Math.ceil(totalStudyHours / daysToSchedule)))\n  \n  // Spaced repetition schedule - increase intensity as exam approaches\n  const getIntensityFactor = (dayIndex: number): number => {\n    const percentThroughStudy = dayIndex / daysToSchedule\n    if (percentThroughStudy < 0.3) return 0.8 // Light phase\n    if (percentThroughStudy < 0.7) return 1.0 // Normal phase\n    return 1.3 // Intense phase (closer to exam)\n  }\n\n  // Time slots for better cognitive load management\n  const timeSlots = [\n    { start: '9:00 AM', end: '11:00 AM', period: 'morning' },\n    { start: '2:00 PM', end: '4:00 PM', period: 'afternoon' },\n    { start: '6:00 PM', end: '8:00 PM', period: 'evening' },\n  ]\n\n  for (let day = 0; day < daysToSchedule; day++) {\n    const currentDate = new Date(today)\n    currentDate.setDate(currentDate.getDate() + day)\n    const dateStr = currentDate.toISOString().split('T')[0]\n\n    const dayEntry: TimetableEntry = {\n      day: day + 1,\n      date: dateStr,\n      sessions: [],\n      totalHours: 0,\n    }\n\n    // Include rest day every 5-6 days\n    const isRestDay = (day + 1) % 6 === 0 && day < daysToSchedule - 2\n    \n    if (isRestDay) {\n      // Light review session only\n      dayEntry.sessions.push({\n        subject: subjects[day % subjects.length],\n        duration: 1.5,\n        focus: `Light review and consolidation of ${subjects[day % subjects.length]} concepts`,\n        timeSlot: '10:00 AM - 11:30 AM',\n      })\n      dayEntry.totalHours = 1.5\n    } else {\n      // Regular study day with multiple sessions\n      const intensityFactor = getIntensityFactor(day)\n      const dayHours = Math.round(baseHoursPerDay * intensityFactor * 10) / 10\n\n      // Distribute subjects across available slots\n      const subjectOrder = subjects.map((_, index) => (index + Math.floor(day / subjects.length)) % subjects.length)\n      const sessionsCount = Math.min(Math.ceil(dayHours / 1.5), 3)\n\n      for (let sessionIndex = 0; sessionIndex < sessionsCount; sessionIndex++) {\n        const subjectIndex = subjectOrder[sessionIndex % subjects.length]\n        const subject = subjects[subjectIndex]\n        const slot = timeSlots[sessionIndex % timeSlots.length]\n        \n        // Duration based on session position and study intensity\n        const sessionDuration = Math.round((dayHours / sessionsCount) * 10) / 10\n\n        dayEntry.sessions.push({\n          subject,\n          duration: sessionDuration,\n          focus: getSubjectFocus(subject, day + 1),\n          timeSlot: `${slot.start} - ${new Date(`2000-01-01 ${slot.start}`).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true }).replace(/:\\d{2}\\s/, ':')}00 ${slot.start.includes('AM') ? 'AM' : 'PM'}`,\n        })\n\n        dayEntry.totalHours += sessionDuration\n      }\n    }\n\n    timetable.push(dayEntry)\n  }\n\n  return timetable\n}\n\nexport async function POST(req: Request) {\n  try {\n    const { subjects, examDate, daysUntilExam } = await req.json()\n\n    if (!subjects || !Array.isArray(subjects) || subjects.length === 0 || !examDate) {\n      return Response.json(\n        { error: 'Missing required fields: subjects (array) and examDate' },\n        { status: 400 },\n      )\n    }\n\n    if (daysUntilExam <= 0) {\n      return Response.json(\n        { error: 'Exam date must be in the future' },\n        { status: 400 },\n      )\n    }\n\n    // Generate smart timetable using intelligent algorithm\n    const timetable = generateSmartTimetable(subjects, examDate, daysUntilExam)\n\n    return Response.json({ timetable })\n  } catch (error) {\n    console.error('Error generating timetable:', error)\n    return Response.json(\n      { error: 'Failed to generate study timetable' },\n      { status: 500 },\n    )\n  }\n}\n"],"names":[],"mappings":"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"}}]
}